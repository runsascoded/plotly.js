"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.environmentPlugin = exports.PLUGIN_NAME = void 0;
const esbuild_plugin_define_1 = require("esbuild-plugin-define");
exports.PLUGIN_NAME = 'environment-plugin';
const environmentPlugin = (data) => ({
    name: exports.PLUGIN_NAME,
    async setup(build) {
        const entries = Array.isArray(data) ? data.map(key => [key, '']) : Object.entries(data);
        const env = Object.fromEntries(entries.map(([key, defaultValue]) => {
            var _a;
            return [key, String((_a = process.env[key]) !== null && _a !== void 0 ? _a : defaultValue)];
        }));
        await (0, esbuild_plugin_define_1.definePlugin)({ process: { env } }).setup(build);
    },
});
exports.environmentPlugin = environmentPlugin;
