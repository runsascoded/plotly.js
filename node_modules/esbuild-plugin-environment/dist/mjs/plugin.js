import { definePlugin } from 'esbuild-plugin-define';
export const PLUGIN_NAME = 'environment-plugin';
export const environmentPlugin = (data) => ({
    name: PLUGIN_NAME,
    async setup(build) {
        const entries = Array.isArray(data) ? data.map(key => [key, '']) : Object.entries(data);
        const env = Object.fromEntries(entries.map(([key, defaultValue]) => {
            return [key, String(process.env[key] ?? defaultValue)];
        }));
        await definePlugin({ process: { env } }).setup(build);
    },
});
